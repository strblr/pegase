
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="An inline, fast, powerful and lightweight PEG parser generator for JavaScript and TypeScript, with semantic actions, parametrized rules, support for native regexps, error recovery, warnings, integrated AST generation and visitors, cut operator, back references, grammar merging, and a lot more.">
      
      
      
      
        <link rel="canonical" href="https://ostrebler.github.io/pegase/basic-concepts/Building-parsers/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.2, mkdocs-material-7.2.8">
    
    
      
        <title>Building parsers - Pegase</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.92558b1b.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
          
          
          <meta name="theme-color" content="#000000">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,400,400i,700%7C&display=fallback">
        <style>:root{--md-text-font-family:"Inter";--md-code-font-family:""}</style>
      
    
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/styles/nord.min.css">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter">
    
      <link rel="stylesheet" href="../../css/style.css">
    
    
      


    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#any-character" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Pegase" class="md-header__button md-logo" aria-label="Pegase" data-md-component="logo">
      
  <img src="../../assets/images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Pegase
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Building parsers
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/ostrebler/pegase" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"/></svg>
  </div>
  <div class="md-source__repository">
    pegase
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Pegase" class="md-nav__button md-logo" aria-label="Pegase" data-md-component="logo">
      
  <img src="../../assets/images/logo.png" alt="logo">

    </a>
    Pegase
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/ostrebler/pegase" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zM277.3 415.7c-8.4 1.5-11.5-3.7-11.5-8 0-5.4.2-33 .2-55.3 0-15.6-5.2-25.5-11.3-30.7 37-4.1 76-9.2 76-73.1 0-18.2-6.5-27.3-17.1-39 1.7-4.3 7.4-22-1.7-45-13.9-4.3-45.7 17.9-45.7 17.9-13.2-3.7-27.5-5.6-41.6-5.6-14.1 0-28.4 1.9-41.6 5.6 0 0-31.8-22.2-45.7-17.9-9.1 22.9-3.5 40.6-1.7 45-10.6 11.7-15.6 20.8-15.6 39 0 63.6 37.3 69 74.3 73.1-4.8 4.3-9.1 11.7-10.6 22.3-9.5 4.3-33.8 11.7-48.3-13.9-9.1-15.8-25.5-17.1-25.5-17.1-16.2-.2-1.1 10.2-1.1 10.2 10.8 5 18.4 24.2 18.4 24.2 9.7 29.7 56.1 19.7 56.1 19.7 0 13.9.2 36.5.2 40.6 0 4.3-3 9.5-11.5 8-66-22.1-112.2-84.9-112.2-158.3 0-91.8 70.2-161.5 162-161.5S388 165.6 388 257.4c.1 73.4-44.7 136.3-110.7 158.3zm-98.1-61.1c-1.9.4-3.7-.4-3.9-1.7-.2-1.5 1.1-2.8 3-3.2 1.9-.2 3.7.6 3.9 1.9.3 1.3-1 2.6-3 3zm-9.5-.9c0 1.3-1.5 2.4-3.5 2.4-2.2.2-3.7-.9-3.7-2.4 0-1.3 1.5-2.4 3.5-2.4 1.9-.2 3.7.9 3.7 2.4zm-13.7-1.1c-.4 1.3-2.4 1.9-4.1 1.3-1.9-.4-3.2-1.9-2.8-3.2.4-1.3 2.4-1.9 4.1-1.5 2 .6 3.3 2.1 2.8 3.4zm-12.3-5.4c-.9 1.1-2.8.9-4.3-.6-1.5-1.3-1.9-3.2-.9-4.1.9-1.1 2.8-.9 4.3.6 1.3 1.3 1.8 3.3.9 4.1zm-9.1-9.1c-.9.6-2.6 0-3.7-1.5s-1.1-3.2 0-3.9c1.1-.9 2.8-.2 3.7 1.3 1.1 1.5 1.1 3.3 0 4.1zm-6.5-9.7c-.9.9-2.4.4-3.5-.6-1.1-1.3-1.3-2.8-.4-3.5.9-.9 2.4-.4 3.5.6 1.1 1.3 1.3 2.8.4 3.5zm-6.7-7.4c-.4.9-1.7 1.1-2.8.4-1.3-.6-1.9-1.7-1.5-2.6.4-.6 1.5-.9 2.8-.4 1.3.7 1.9 1.8 1.5 2.6z"/></svg>
  </div>
  <div class="md-source__repository">
    pegase
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../Quick-start/" class="md-nav__link">
        Quick start
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        Basic concepts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Basic concepts" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Basic concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Building parsers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Building parsers
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#any-character" class="md-nav__link">
    Any character
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#end-of-input" class="md-nav__link">
    End of input
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#epsilon" class="md-nav__link">
    Epsilon
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cut-operator" class="md-nav__link">
    Cut operator
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sub-parsers" class="md-nav__link">
    Sub-parsers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#back-references" class="md-nav__link">
    Back references
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nullary-directives" class="md-nav__link">
    Nullary directives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#non-terminals" class="md-nav__link">
    Non-terminals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#string-literals" class="md-nav__link">
    String literals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#character-classes" class="md-nav__link">
    Character classes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metacharacters" class="md-nav__link">
    Metacharacters
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#regex-literals" class="md-nav__link">
    Regex literals
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#repetitions" class="md-nav__link">
    Repetitions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#predicates" class="md-nav__link">
    Predicates
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#captures" class="md-nav__link">
    Captures
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#synchronizations" class="md-nav__link">
    Synchronizations
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#repetitions-with-separators" class="md-nav__link">
    Repetitions with separators
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#subtractions" class="md-nav__link">
    Subtractions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sequences" class="md-nav__link">
    Sequences
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#directives-includes-semantic-actions" class="md-nav__link">
    Directives (includes semantic actions)
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ordered-choices" class="md-nav__link">
    Ordered choices
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rules-and-grammars" class="md-nav__link">
    Rules and grammars
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Semantic-action-and-dataflow/" class="md-nav__link">
        Semantic action and dataflow
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Handling-whitespaces/" class="md-nav__link">
        Handling whitespaces
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Tokens/" class="md-nav__link">
        Tokens
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Directives/" class="md-nav__link">
        Directives
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../Failures-and-warnings/" class="md-nav__link">
        Failures and warnings
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      <label class="md-nav__link" for="__nav_4">
        Advanced concepts
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Advanced concepts" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Advanced concepts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-concepts/Parametrized-rules/" class="md-nav__link">
        Parametrized rules
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-concepts/AST-and-visitors/" class="md-nav__link">
        AST and visitors
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-concepts/Working-with-RegExp/" class="md-nav__link">
        Working with RegExp
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-concepts/Cut-operator/" class="md-nav__link">
        Cut operator
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-concepts/Debugging-with-tracers/" class="md-nav__link">
        Debugging with tracers
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-concepts/Using-TypeScript/" class="md-nav__link">
        Using TypeScript
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-concepts/Error-recovery/" class="md-nav__link">
        Error recovery
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-concepts/Grammar-fragments/" class="md-nav__link">
        Grammar fragments
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-concepts/Writing-a-plugin/" class="md-nav__link">
        Writing a plugin
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-concepts/Writing-a-Parser-subclass/" class="md-nav__link">
        Writing a Parser subclass
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../advanced-concepts/L-attributed-grammars/" class="md-nav__link">
        L-attributed grammars
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      <label class="md-nav__link" for="__nav_5">
        API
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="API" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/peg-createTag/" class="md-nav__link">
        peg, createTag
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/Parser/" class="md-nav__link">
        Parser
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/defaultPlugin/" class="md-nav__link">
        defaultPlugin
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/Hooks/" class="md-nav__link">
        Hooks
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/Utility-functions/" class="md-nav__link">
        Utility functions
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/Types/" class="md-nav__link">
        Types
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../api/Metagrammar/" class="md-nav__link">
        Metagrammar
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      <label class="md-nav__link" for="__nav_6">
        More
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="More" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          More
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../more/Ideas/" class="md-nav__link">
        Ideas
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../more/Bug-report-and-discussion/" class="md-nav__link">
        Bug report and discussion
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                  <h1>Building parsers</h1>
                
                <p><strong>The <code>peg</code> tag accepts any valid Pegase expression and always returns a <code>Parser</code> instance.</strong></p>
<p>Pegase parsers follow the <em>combinator</em> paradigm: simple parsers are combined to form more complex parsers. You can read more about it in the <a href="/pegase/api/Parser/"><code>Parser</code></a> section. In the following sections are the different expressions you can use as building blocks. To see the exact grammar of pegs (called metagrammar), please refer to the <a href="/pegase/api/Metagrammar/">Metagrammar</a> page.</p>
<hr />
<h3 id="any-character">Any character</h3>
<pre><code class="language-text">.
</code></pre>
<p>Matches any character.</p>
<p><strong>Children</strong>: <code>[]</code></p>
<p><strong>Precedence</strong>: 0</p>
<hr />
<h3 id="end-of-input">End of input</h3>
<pre><code class="language-text">$
</code></pre>
<p>Matches the end of the input. This expression is syntactic sugar for <code>!. @token("end of input")</code>. Indeed, the end of the input has been reached when there's no character left, thus when "not any character" (<code>!.</code>) can be evaluated as true.</p>
<p><strong>Children</strong>: <code>[]</code></p>
<p><strong>Precedence</strong>: 0</p>
<hr />
<h3 id="epsilon">Epsilon</h3>
<pre><code class="language-text">ε
</code></pre>
<p>Matches the empty string. Strictly equivalent to <code>''</code> and always a success.</p>
<p><strong>Children</strong>: <code>[]</code></p>
<p><strong>Precedence</strong>: 0</p>
<hr />
<h3 id="cut-operator">Cut operator</h3>
<pre><code class="language-text">^
</code></pre>
<p>In an ordered choice expression, the cut operator commits to the current alternative to prevent exploring any further in case it fails. Example : <code>'x' ^ a | b</code> will <strong>not</strong> try <code>b</code> if <code>'x'</code> was found but <code>a</code> failed. Although it's called an <em>operator</em>, it's really a <code>Parser</code> on its own. Used outside an ordered choice expression, it's a no-op. Read more in <a href="https://ostrebler.github.io/pegase/advanced-concepts/Cut-operator/">Cut operator</a>.</p>
<p><strong>Children</strong>: <code>[]</code></p>
<p><strong>Precedence</strong>: 0</p>
<hr />
<h3 id="sub-parsers">Sub-parsers</h3>
<pre><code class="language-text">(expr)
('a' 'b' 'c')
${jsParser}
</code></pre>
<p>Delegates the parsing to a sub-parser. This happens when wrapping a peg expression in parentheses, or by injecting an external <code>Parser</code> instance via tag argument.</p>
<p><strong>Children</strong>: Forwarded from the sub-parser.</p>
<p><strong>Precedence</strong>: 0</p>
<hr />
<h3 id="back-references">Back references</h3>
<pre><code class="language-text">&gt;id&lt;
</code></pre>
<p>Back reference to an earlier string capture. This will matches the string literal captured as <code>id</code>. Read more in <a href="https://ostrebler.github.io/pegase/basic-concepts/Semantic-action-and-dataflow/">Semantic action and dataflow</a>.</p>
<p><strong>Children</strong>: <code>[]</code></p>
<p><strong>Precedence</strong>: 0</p>
<hr />
<h3 id="nullary-directives">Nullary directives</h3>
<pre><code class="language-text">@@dir
@@dir(x, y)
@${jsFunction}
@ =&gt; 'label'
</code></pre>
<p>This is syntactic sugar for directives applied to the empty literal parser: <code>'' @dir</code>, <code>'' ${jsFunction}</code>, etc. Handy if the directive you want to invoke doesn't care about a wrapped parser. Read more in <a href="https://ostrebler.github.io/pegase/basic-concepts/Directives/">Directives</a>.</p>
<p><strong>Children</strong>: Directives generate new parsers. So <code>children</code> depends on whatever parser is generated.</p>
<p><strong>Precedence</strong>: 0</p>
<hr />
<h3 id="non-terminals">Non-terminals</h3>
<pre><code class="language-text">identifier
identifier('a', 'c' | 'd')
identifier('a',, 'd')
</code></pre>
<p>Matches the non-terminal. A non-terminal can refer to a <em>grammar rule</em> or to a <em>rule parameter</em>. Since rules can be parametrized, non-terminals can have parameters. Parameters can be omitted at any place if the corresponding rule defines a default value for them.</p>
<p><strong>Children</strong>: Forwarded from the non-terminal (<code>identifier</code> in the example)</p>
<p><strong>Precedence</strong>: 0</p>
<hr />
<h3 id="string-literals">String literals</h3>
<pre><code class="language-text">&quot;lit&quot;
'test'
''
${jsString}
42
${jsNumber}
</code></pre>
<p>Matches the string literal. When a JS string value is inserted as a tag argument into the a peg expression, it's cast into a non-emissive string literal parser. String literals that represent numbers can directly be written as numbers, without quotes. Inserting a JS number via tag argument also creates a string literal parser.</p>
<p><strong>Children</strong>: When double-quotes are used, the parsed substring is emitted as a single child. <code>[]</code> otherwise.</p>
<p><strong>Precedence</strong>: 0</p>
<hr />
<h3 id="character-classes">Character classes</h3>
<pre><code class="language-text">[abc]
[0-9]
[a-zA-Z]
[^u]
[^a-zA-Z]
</code></pre>
<p>There are two types of character classes: non-negated and negated (<code>^</code>). Non-negated classes match one character in the given character class. Negated classes match one character <strong>not</strong> in the given class. Internally, characters classes are instantiated as <code>RegExp</code> instances and thus end up as regex parsers.</p>
<p><strong>Children</strong>: <code>[]</code></p>
<p><strong>Precedence</strong>: 0</p>
<hr />
<h3 id="metacharacters">Metacharacters</h3>
<pre><code class="language-text">\n
\s
\w
\xAF
\uA6F1
</code></pre>
<p>Matches the escaped metacharacter. The same metacharacters available in <code>RegExp</code> expressions are available in Pegase, meaning <code>\s</code> matches any whitespace, <code>\S</code> any non-whitespace, <code>\uA6F1</code> matches the unicode character <code>A6F1</code>, etc. (<a href="https://www.w3schools.com/jsref/jsref_obj_regexp.asp">See <code>RegExp</code> documentation</a> for a complete list of supported metacharacters).</p>
<p><strong>Children</strong>: <code>[]</code></p>
<p><strong>Precedence</strong>: 0</p>
<hr />
<h3 id="regex-literals">Regex literals</h3>
<pre><code class="language-text">/ab/
/\w+/
/(\d+):(\d+)/
${jsRegExp}
</code></pre>
<p>Matches the regex. It can either be a regex literal (same syntax as JS' <code>RegExp</code>), or an actual <code>RegExp</code> instance injected as tag argument. <em>Named</em> capturing groups are transformed into Pegase captures. Read more in <a href="https://ostrebler.github.io/pegase/advanced-concepts/Working-with-RegExp/">Working with RegExp</a>.</p>
<p><strong>Children</strong>: The regex's capturing groups</p>
<p><strong>Precedence</strong>: 0</p>
<hr />
<h3 id="repetitions">Repetitions</h3>
<pre><code class="language-text">a?
a+
a*
a{4}
a{4, 15}
a{4,}
a{${jsNumber}, 15}
</code></pre>
<p>Invokes a sub-parser (<code>a</code>) <strong>greedily</strong> as many times as specified. Different kind of quantifiers are available:</p>
<table>
<thead>
<tr>
<th>Expression form</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>a?</code></td>
<td>Optional <code>a</code> (zero or one)</td>
</tr>
<tr>
<td><code>a+</code></td>
<td>Matches one or more <code>a</code></td>
</tr>
<tr>
<td><code>a*</code></td>
<td>Matches any sequence of <code>a</code> (zero or more)</td>
</tr>
<tr>
<td><code>a{n}</code></td>
<td>Matches <code>a</code> exactly <code>n</code> times. <code>n</code> can be a number literal or a JS number injected via tag argument.</td>
</tr>
<tr>
<td><code>a{n, m}</code></td>
<td>Matches <code>a</code> between <code>n</code> and <code>m</code> times. Number literals and tag arguments are allowed for <code>n</code> and <code>m</code>.</td>
</tr>
<tr>
<td><code>a{n,}</code></td>
<td>Matches <code>a</code> at least <code>n</code> times. As above, <code>n</code> is a number literal or a tag argument.</td>
</tr>
</tbody>
</table>
<p><strong>Children</strong>: Forwarded and concatenated from the wrapped expression</p>
<p><strong>Precedence</strong>: 1</p>
<hr />
<h3 id="predicates">Predicates</h3>
<pre><code class="language-text">&amp;a
!a
</code></pre>
<p>In case of a positive predicate (<code>$</code>), <code>a</code> is matched without consuming any input. For negative predicates (<code>!</code>), the expression fails if <code>a</code> succeeds and vice-versa.</p>
<p><strong>Children</strong>: <code>[]</code></p>
<p><strong>Precedence</strong>: 2</p>
<hr />
<h3 id="captures">Captures</h3>
<pre><code class="language-text">&lt;id&gt;a
&lt;&gt;id
&lt;...id&gt;a
&lt;...&gt;id
</code></pre>
<p>Captures associate a parser's <code>value</code> or <code>children</code> to an identifier (<code>id</code> in the example). To captures the <code>children</code> array, use <code>...</code>. When the wrapped expression is a non-terminal of the same name than the capture, the capture's name can be omitted.</p>
<p>Captures are accumulated in <em>scopes</em>, can be overwritten and be read in semantic actions and custom parsers. Rule definitions and ordered choice alternatives create new capture scopes. Read more in <a href="https://ostrebler.github.io/pegase/basic-concepts/Semantic-action-and-dataflow/">Semantic action and dataflow</a>.</p>
<p><strong>Children</strong>: Forwarded from the wrapped expression</p>
<p><strong>Precedence</strong>: 3</p>
<hr />
<h3 id="synchronizations">Synchronizations</h3>
<pre><code class="language-text">...a
</code></pre>
<p>Skips input character by character until <code>a</code> is matched. This can be used to implement <em>synchronization</em> to recover from errors and is equivalent to <code>(!a .)* a</code>. Write <code>...&amp;a</code> if you want to sync to <code>a</code> without consuming <code>a</code>. See <a href="https://ostrebler.github.io/pegase/basic-concepts/Building-parsers/#failure-recovery">Failure recovery</a>.</p>
<p><strong>Children</strong>: Forwarded from the wrapped expression</p>
<p><strong>Precedence</strong>: 4</p>
<hr />
<h3 id="repetitions-with-separators">Repetitions with separators</h3>
<pre><code class="language-text">a % b
a %? b
a %{3} b
a %{3,} b
a %{3, ${jsNumber}} b
</code></pre>
<p>Matches a sequence of <code>a</code> separated by <code>b</code>. The <code>%</code> operator can be quantified explicitly using the quantifiers described in <a href="#repetitions">Repetitions</a>. <code>a % b</code> is equivalent to <code>a (b a)*</code>, <code>a %? b</code> to <code>a (b a)?</code>, etc.</p>
<p><strong>Children</strong>: Forwarded and concatenated from the subexpressions</p>
<p><strong>Precedence</strong>: 5</p>
<hr />
<h3 id="subtractions">Subtractions</h3>
<pre><code class="language-text">a - b
</code></pre>
<p>Matches <code>a</code> but not <code>b</code> (fails if <code>b</code> succeeds). Strictly equivalent to <code>!b a</code>.</p>
<p><strong>Children</strong>: Forwarded from expression <code>a</code></p>
<p><strong>Precedence</strong>: 6</p>
<hr />
<h3 id="sequences">Sequences</h3>
<pre><code class="language-text">a b
a b c
</code></pre>
<p>Matches <code>a</code> followed by <code>b</code>.</p>
<p><strong>Children</strong>: Forwarded and concatenated from expression <code>a</code> and <code>b</code></p>
<p><strong>Precedence</strong>: 7</p>
<hr />
<h3 id="directives-includes-semantic-actions">Directives (includes semantic actions)</h3>
<pre><code class="language-text">a @dir
a @dir(x, y)
a @dir(x, ${y})
a @dir @other

a ${jsFunction}
a =&gt; 'label'
</code></pre>
<p>Applies the directive(s) to the parser <code>a</code>. Directives are functions that take a parser and return a new parser. They can take additional arguments and can be chained. These arguments can include number, string, regex literals, characters classes, metacharacters, non-terminals and tag arguments.</p>
<p>Injecting a JS function right after a peg expression is syntactic sugar for the <code>@action</code> directive, which builds an action parser (a parser that calls a custom function on success). So <code>a ${jsFunction}</code> and <code>a @action(${jsFunction})</code> are strictly equivalent.</p>
<p>The <code>a =&gt; 'label'</code> syntax is syntactic sugar for the <code>@node</code> directive and is equivalent to <code>a @node('label')</code>. The label can be specified via a string tag argument if necessary.</p>
<p>Directives are a powerful and central tool within Pegase. Read more about it in <a href="/pegase/basic-concepts/Directives/">Directives</a>.</p>
<p><strong>Children</strong>: Directives generate new parsers. So <code>children</code> depends on whatever parser is generated. When using the <code>@action</code> shorthand (<code>a ${jsFunction}</code>), one can emit a single child by returning a non-<code>undefined</code> value from the function, or emit multiple children by calling <a href="/pegase/api/Hooks/">the <code>$emit</code> hook</a> inside the function. Not returning anything and not calling <code>$emit</code> will forward the wrapped expression's <code>children</code>. When using the <code>@node</code> shorthand (<code>a =&gt; 'label'</code>), the generated <code>Node</code> is emitted as a single child (see <a href="/pegase/advanced-concepts/AST-and-visitors/">AST and visitors</a>).</p>
<p><strong>Precedence</strong>: 8</p>
<hr />
<h3 id="ordered-choices">Ordered choices</h3>
<pre><code class="language-text">a | b
| a | b | c
</code></pre>
<p>Ordered choices (or <em>alternatives</em>) try their subexpression one by one in order and succeed if a subexpression succeeds. Fails otherwise. Please note that you can add a leading bar for aesthetic purposes.</p>
<p><strong>Children</strong>: Forwarded from the successful subexpression (<code>a</code> or <code>b</code> in the example)</p>
<p><strong>Precedence</strong>: 9</p>
<hr />
<h3 id="rules-and-grammars">Rules and grammars</h3>
<pre><code class="language-text">id: a
$id: a
id @directive: a
id(p1, p2): a
id(p1, p2) @directive: a
id(p = \d): a
id(p1, p2 = 'a', p3): a
</code></pre>
<p>These expressions create rules. Think of rules as alias to peg expressions. Once defined, they can be invoked via non-terminals (see <a href="#non-terminals">Non-terminals</a>). Rules can be stacked to form <strong>grammars</strong>. They can also be parametrized and the parameters can take default values. Since non-terminal invocations can skip any parameter, default parameters values don't need to appear at the last parameter positions.</p>
<p>If directives are specified just before <code>:</code>, they are applied to the whole right-side expression.</p>
<p>Adding <code>$</code> at the beginning of a rule name acts as syntactic sugar. It applies an implicit <code>@token</code> directive whose display name in failure reports will be the rule name transformed to space case. Example: <code>$myToken: a</code> is equivalent to <code>$myToken @token("my token"): a</code>.</p>
<p>Grammars can be nested by using <a href="#sub-parsers">parentheses</a>:</p>
<pre><code class="language-text">r1: 'a' (
  nested1: 'u' nested2
  nested2: 'v'
) r2
r2: 'b'
</code></pre>
<p>Nesting grammars can be used to parametrize entire grammars, or as a separation of concern method.</p>
<p><strong>Children</strong>: Forwarded from the topmost rule</p>
<p><strong>Precedence</strong>: 10</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../../Quick-start/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Quick start" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Quick start
            </div>
          </div>
        </a>
      
      
        
        <a href="../Semantic-action-and-dataflow/" class="md-footer__link md-footer__link--next" aria-label="Next: Semantic action and dataflow" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Semantic action and dataflow
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            © ostrebler
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/ostrebler/pegase" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["toc.integrate", "navigation.top"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.94ec81fe.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.48dfec6c.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.2/highlight.min.js"></script>
      
        <script src="https://unpkg.com/pegase@0.5.3/umd/index.js"></script>
      
        <script src="../../javascript/config.js"></script>
      
    
  </body>
</html>